extends layout

block content

  div(id='wrapper' class='d-flex')
    // Sidebar
    div(id='sidebar-wrapper' class='border-end bg-dynamic-3')
      div(class=' sidebar-toggler sidebar-heading border-bottom-sidebar bg-dynamic-3')
        span='ZIL = '
        span(class='font-weight-bold currency_symbol mr-1')= '$'
        span(class='font-weight-bold ZIL_price_fiat')= 'Loading...'
        span(class='ml-2 mr-2 text-secondary')='|'
        span(class='font-weight-bold ZIL_price_fiat_percent_change_24h_container ZIL_price_fiat_percent_change_24h')
        span(class='ml-1 font-weight-bold ZIL_price_fiat_percent_change_24h_container')='%'
        button(class='close')
          span='×'
      table(class='table-md list-group list-group-flush')
        tbody
          each circulatingSupply, ticker in zrcTokensCirculatingSupply
            if !(ticker in zrcTokenPropertiesListMap)
              - continue
            - let tokenProperties = zrcTokenPropertiesListMap[ticker]
            if ('fixed_token_rate' in tokenProperties)
              - continue
            tr(class='list-group-item-action list-group-item-sidebar border-bottom-sidebar' tokenSymbol=ticker)
              th(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                img(height='22' width='22' src=tokenProperties.logo_url loading='lazy')
              th(style='display: table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                span= tokenProperties.ticker
              td(style='text-align: right; white-space: nowrap; vertical-align: middle; width: 1%;' )
                div(id='simple_chart_'+tokenProperties.ticker)
              td(style='text-align: right; white-space: nowrap; vertical-align: middle; width: 1%;' )
                span(class=tokenProperties.ticker+'_price_zil')= 'Loading...'
              td(class=tokenProperties.ticker+'_price_zil_percent_change_24h_container' style='text-align: right; white-space: nowrap; vertical-align: middle; width: 1%;' )
                span(class=tokenProperties.ticker+'_price_zil_percent_change_24h')

      div(class=' sidebar-toggler sidebar-heading border-bottom-sidebar bg-dynamic-3')
        span(class='font-weight-bold')='Close sidebar' 
        button(class='close')
          span='×'

    // Page content wrapper
    div(id='page-content-wrapper')

      nav(class='navbar navbar-light bg-dynamic-1 justify-content-between')
        button(class='sidebar-toggler navbar-toggler mr-1')
          span(class='navbar-toggler-icon')

        a(class='navbar-brand zilwatch-navbar-brand')
          img(src='/images/zilWatch-02.svg' width='30' height='30' class='d-inline-block align-top mr-2' alt='zilWatch')
          = 'zilWatch'

        select(id='currency_selector' class='custom-select my-2 my-sm-0 ml-auto mr-2')
          each symbol, code in currencyMap
            option(value=code)= code.toUpperCase() + ' (' + symbol + ')'

        button(id='toggle_theme_btn' class='btn btn-info my-2 my-sm-0 mr-2')
          i(id='toggle_theme_icon' class='fa fa-sun-o')

        button(id='wallet_refresh' class='btn btn-info my-2 my-sm-0 mr-2')
          i(id='wallet_refresh_icon' class='fa fa-refresh')
        a(class='wallet-viewblock-anchor' target='_blank')
          button(id='topbar_wallet_address_container' class='btn btn-outline-info my-2 my-sm-0' style='display: none;')
            img(class='ark-profile-pic rounded-circle mr-2' height='24' src='' alt='ARK profile pic' style='display: none;')
            span(id='topbar_wallet_address')
        button(id='topbar_wallet_connect_button' class='wallet_connect_button btn btn-info my-2 my-sm-0')= 'Connect'

      // Public Content Container
      div(id='public_content_container' class='container-xxl')

        hr

        div(class='row accordion')

          div(class='col-xl-12' style='padding: 0;')
            div(class='box-public')

              div(id='price_content_header_container' class='card-header collapsed' data-toggle='collapse' href='#price_content_container')
                a(id='price_content_header_title' class='card-title font-weight-bold')= 'Token Information'
              div(id='price_content_container' class='card-body collapse table-sticky-header')
                table(id='price_table' class='table table-sm table-borderless' width='100%')
                  thead(class='table-background-color-header')
                    tr(class='table-background-color')
                      th(class='table-background-color-header' style='text-align: left; white-space: nowrap; width: 7%;' )= 'Token'
                      th(style='text-align: right; white-space: nowrap; width: 7%;' )
                        span= 'Price (ZIL)'
                      th(style='text-align: right; white-space: nowrap; width: 3%;' )
                        span='24h %'
                      th(style='text-align: right; white-space: nowrap; width: 10%;' )
                        span= '24h Low'
                        span(class='ml-1 mr-1')='/'
                        span= 'High'
                      th(style='text-align: right; white-space: nowrap; width: 7%;' )
                        span= 'Price'
                        span= ' ('
                        span(class='currency_symbol')= '$'
                        span= ')'
                      th(style='text-align: right; white-space: nowrap; width: 3%;' )
                        span= '24h %'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= '24h Volume'
                        span= ' ('
                        span(class='currency_symbol')= '$'
                        span= ')'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= 'Total Pool'
                        span= ' ('
                        span(class='currency_symbol')= '$'
                        span= ')'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= 'Circ. Supply (Coin)'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= 'Market Cap'
                        span= ' ('
                        span(class='currency_symbol')= '$'
                        span= ')'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= 'Total Supply (Coin)'
                      th(style='text-align: right; white-space: nowrap; width: 10%;')
                        span= 'Total Supply'
                        span= ' ('
                        span(class='currency_symbol')= '$'
                        span= ')'

                  tbody(class='table-background-color')
                    each coinProperties, key in coinMap 
                      tr
                        th(scope='row' style='display:table-cell; white-space: nowrap; vertical-align: middle;')
                          img(height='18' width='18' src=coinProperties.logo_url loading='lazy')
                          span(class='ml-2')= coinProperties.ticker
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=coinProperties.ticker+'_price_zil')= 'Loading...'
                        td(class='pr-3' class=coinProperties.ticker+'_price_zil_percent_change_24h_container' style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=coinProperties.ticker+'_price_zil_percent_change_24h')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          div(class='progress' style='height: 0.4rem; margin-top: 0.2rem;')
                            div(id=coinProperties.ticker+'_price_24h_low_high_progress' class='progress-bar' role='progressbar' style='width: 0%;' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100')
                          span(class='currency_symbol mr-1')= '$'
                          span(id=coinProperties.ticker+'_price_24h_low_fiat')= ''
                          span(class='ml-1 mr-1')='/'
                          span(id=coinProperties.ticker+'_price_24h_high_fiat')= ''
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=coinProperties.ticker+'_price_fiat')= 'Loading...'
                        td(class=coinProperties.ticker+'_price_fiat_percent_change_24h_container pr-3' style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=coinProperties.ticker+'_price_fiat_percent_change_24h')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_lp_24h_volume_fiat')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_lp_total_pool_fiat')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_circulating_supply_coin')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_circulating_supply_fiat')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_total_supply_coin')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=coinProperties.ticker+'_total_supply_fiat')

                    each circulatingSupply, ticker in zrcTokensCirculatingSupply
                      if !(ticker in zrcTokenPropertiesListMap)
                        - continue
                      - let tokenProperties = zrcTokenPropertiesListMap[ticker]
                      if ('fixed_token_rate' in tokenProperties)
                        div(style='display:none')
                          span(id='public_'+tokenProperties.ticker+'_price_zil')= 'Loading...'
                          span(class=tokenProperties.ticker+'_price_zil_percent_change_24h')
                          span(id=tokenProperties.ticker+'_price_24h_low_high_progress' style='width: 0%;' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100')
                          span(id=tokenProperties.ticker+'_price_24h_low')= ''
                          span(id=tokenProperties.ticker+'_price_24h_high')= ''
                          span(id='public_'+tokenProperties.ticker+'_price_fiat')= 'Loading...'
                          span(class=tokenProperties.ticker+'_price_fiat_percent_change_24h')
                          span(id=tokenProperties.ticker+'_lp_24h_volume_fiat')= '0'
                          span(id=tokenProperties.ticker+'_lp_total_pool_fiat')= 'Loading...'
                          span(id=tokenProperties.ticker+'_circulating_supply_zrc')= '0'
                          span(id=tokenProperties.ticker+'_circulating_supply_fiat')= '0'
                          span(id=tokenProperties.ticker+'_total_supply_zrc')= '0'
                          span(id=tokenProperties.ticker+'_total_supply_fiat')= '0'
                        - continue

                      tr
                        th(scope='row' style='display:table-cell; white-space: nowrap; vertical-align: middle;')
                          img(height='18' width='18' src=tokenProperties.logo_url loading='lazy')
                          span(class='ml-2')= tokenProperties.ticker
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id='public_'+tokenProperties.ticker+'_price_zil')= 'Loading...'
                        td(class='pr-3' class=tokenProperties.ticker+'_price_zil_percent_change_24h_container' style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=tokenProperties.ticker+'_price_zil_percent_change_24h')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          div(class='progress' style='height: 0.4rem; margin-top: 0.2rem;')
                            div(id=tokenProperties.ticker+'_price_24h_low_high_progress' class='progress-bar' role='progressbar' style='width: 0%;' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100')
                          span(id=tokenProperties.ticker+'_price_24h_low')= ''
                          span(class='ml-1 mr-1')='/'
                          span(id=tokenProperties.ticker+'_price_24h_high')= ''
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id='public_'+tokenProperties.ticker+'_price_fiat')= 'Loading...'
                        td(class=tokenProperties.ticker+'_price_fiat_percent_change_24h_container pr-3' style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(class=tokenProperties.ticker+'_price_fiat_percent_change_24h')
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_lp_24h_volume_fiat')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_lp_total_pool_fiat')= 'Loading...'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_circulating_supply_zrc')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_circulating_supply_fiat')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_total_supply_zrc')= '0'
                        td(style='text-align: right; white-space: nowrap; vertical-align: middle;' )
                          span(id=tokenProperties.ticker+'_total_supply_fiat')= '0'

          if zilswapDexReward || zilStakingReward
            div(class='col-xl-6 col-xxl-4' style='padding: 0;')

              div(class='box-public')
                div(id='farming_info_content_header_container' class='card-header collapsed' data-toggle='collapse' href='#farming_info_content_container')
                  a(id='farming_info_content_header_title' class='card-title font-weight-bold')= 'Farming Information'
                div(id='farming_info_content_container' class='card-body collapse')

                  if zilStakingReward
                    table(class='table table-sm table-borderless' width='100%')
                      tbody(class='table-background-color-header')
                        tr
                          th(colspan=2 style='text-align: left; white-space: nowrap; width: 25%;' )= 'Token Staking'
                          th(style='text-align: right; white-space: nowrap; width: 25%;')
                            span= 'Unbond'
                          th(style='text-align: right; white-space: nowrap; width: 25%;')
                            span= 'Daily %'
                          th(style='text-align: right; white-space: nowrap; width: 25%;')
                            span= 'APR %'
                      tbody
                        tr
                          td(rowspan=2 scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                            img(height='18' width='18' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                          td(rowspan=2 style='display:table-cell; vertical-align: middle; text-align: left; white-space: nowrap;' )
                            span= 'Zilliqa'
                          td(rowspan=2 style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap;' )
                            span= zilStakingReward.unbonding_period_days + ' days'
                          td(style='text-align: right; white-space: nowrap;' )
                            span(class='text-secondary mr-1')= '(ZIL)'
                            span= zilStakingReward.zil_reward_daily_percent
                          td(style='text-align: right; white-space: nowrap;' )
                            span(class='text-secondary mr-1')= '(ZIL)'
                            span= zilStakingReward.zil_reward_apr_percent

                  if zilswapDexReward
                    table(class='table table-sm table-borderless' width='100%')
                      tbody(class='table-background-color-header')
                        tr
                          th(colspan=2 style='text-align: left; white-space: nowrap; width: 10%;' )= 'Zilswap LP'
                          th(colspan=2 style='text-align: right; white-space: nowrap; width: 10%;')
                            span= 'Weekly Reward'
                          th(style='text-align: right; white-space: nowrap; width: 10%;')
                            span= 'Daily %'
                          th(style='text-align: right; white-space: nowrap; width: 10%;')
                            span= 'APR %'

                      tbody
                        - let oddRow = false
                        each circulatingSupply, ticker in zrcTokensCirculatingSupply
                          if !(ticker in zrcTokenPropertiesListMap)
                            - continue
                          - let tokenProperties = zrcTokenPropertiesListMap[ticker]
                          if ('fixed_token_rate' in tokenProperties)
                            - continue

                          if zilswapDexReward[ticker]
                            - oddRow = !oddRow
                            - let numOfRewardTickers = Object.keys(zilswapDexReward[ticker]).length
                            - let firstIteration = true

                            each rewardAttributes, rewardTicker in zilswapDexReward[ticker]
                              - let currLogoUrl = rewardTicker in zrcTokenPropertiesListMap ? zrcTokenPropertiesListMap[rewardTicker].logo_url : 'https://meta.viewblock.io/ZIL/logo';
                              tr(class= oddRow ? 'table-background-dark' : 'table-background-light')
                                if firstIteration
                                  td(rowspan=numOfRewardTickers scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                    img(height='18' width='18' src=tokenProperties.logo_url loading='lazy')
                                  td(rowspan=numOfRewardTickers style='display:table-cell; vertical-align: middle; text-align: left; white-space: nowrap;' )
                                    span= tokenProperties.ticker + '-ZIL'
                                  - firstIteration = false

                                td(style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span= rewardAttributes.reward_amount
                                td(style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                  img(height='18' width='18' src=currLogoUrl loading='lazy')
                                td(style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span= rewardAttributes.daily_percent
                                td(style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span= rewardAttributes.apr_percent


          //---------------------- Start of Swap DIV ---------------------
          div(class='col-xl-6 col-xxl-4' style='padding: 0;')

            div(class='box-public')
              div(id='swap_content_header_container' class='card-header collapsed' data-toggle='collapse' href='#swap_content_container')
                span(id='swap_content_header_title' class='card-title font-weight-bold')= 'Swap'
                img(id='swap_content_header_image' class='ml-3' height='20' src='/images/zilswap_long_logo.svg' loading='lazy')
              div(id='swap_content_container' class='card-body collapse' style='padding: 0;')

                div(class='swap-box-table')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody
                      tr
                        td(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')

                          h5(id='swap_select_token_from' class='swap-mini-button-box')
                            img(id='swap_select_token_from_img' height='24' width='24' src='' loading='lazy' style='display: none;')
                            span(id='swap_select_token_from_ticker' class='ml-1 font-weight-bold' style='vertical-align: middle;')= 'Select token'
                            svg(id='swap_select_token_from_svg' class='ml-1 arrow-down' width='12' height='7' viewBox='0 0 12 7' fill='none' xmlns='http://www.w3.org/2000/svg')
                              path(d='M0.97168 1L6.20532 6L11.439 1')

                        td(style='text-align: right; white-space: nowrap; width: 40%;' )
                          h4(style='padding: 0; margin: 0;')
                            input(id='swap_token_from_amount' class='swap-input' inputmode='decimal' autocomplete='off' autocorrect='off' type='text' pattern='^[0-9]*[.,]?[0-9]*$' placeholder='0.0' minlength='1' maxlength='79' spellcheck='false' value='')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody
                      tr(id='swap_token_from_balance_container' style='visibility: hidden;')
                        td(scope='row' style='white-space: nowrap;' )
                          span= 'Balance: '
                          span(id='swap_token_from_balance')= '0'
                          span(id='swap_token_from_max_balance_button' class='swap-mini-button-box ml-2')= 'Max'
                        td(id='swap_token_from_amount_fiat_container' style='text-align: right; white-space: nowrap; visibility: hidden;')
                          span= '~'
                          span(class='currency_symbol mr-1')= '$'
                          span(id='swap_token_from_amount_fiat')

                div(id='swap_arrow_down_toggle_direction' class='swap-arrow-down-container')
                  svg(id='swap_arrow_down_toggle_direction_svg' class='arrow-down' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg')
                    line(x1='12' y1='5' x2='12' y2='19')
                    polyline(points='19 12 12 19 5 12')

                div(class='swap-box-table')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody
                      tr
                        td(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                          h5(id='swap_select_token_to' class='swap-mini-button-box')
                            img(id='swap_select_token_to_img' height='24' width='24' src='' loading='lazy' style='display: none;')
                            span(id='swap_select_token_to_ticker' class='ml-1 font-weight-bold' style='vertical-align: middle;')= 'Select token'
                            svg(id='swap_select_token_to_svg' class='ml-1 arrow-down' width='12' height='7' viewBox='0 0 12 7' fill='none' xmlns='http://www.w3.org/2000/svg')
                              path(d='M0.97168 1L6.20532 6L11.439 1')
                        td(style='text-align: right; white-space: nowrap; width: 40%;' )
                          h4(style='padding: 0; margin: 0;')
                            input(id='swap_token_to_amount' class='swap-input' inputmode='decimal' autocomplete='off' autocorrect='off' type='text' pattern='^[0-9]*[.,]?[0-9]*$' placeholder='0.0' minlength='1' maxlength='79' spellcheck='false' value='')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody
                      tr
                        td(id='swap_token_to_balance_container' scope='row' style='white-space: nowrap; visibility: hidden;')
                          span= 'Balance: '
                          span(id='swap_token_to_balance')= '0'
                        td(style='text-align: right; white-space: nowrap;' )

                div(id='swap_error_message_container' style='padding:0.6rem; text-align: right; display: none;')
                  span(id='swap_error_message' class='negative-red')

                div(id='swap_error_message_2_container' style='padding:0.6rem; text-align: right; display: none;')
                  span(id='swap_error_message_2' class='negative-red')

                div(class='swap-box-table-transparent')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody
                      tr
                        td(scope='row' style='text-align: left; white-space: nowrap; width: 1%;' )
                          span(id='swap_token_settings_button' class='swap-mini-button-box' data-toggle='modal' data-target='#swap_token_settings_modal')
                            i(class='fa fa-cog mr-1')
                            = 'Set.'

                        td(scope='row' style='text-align: left; white-space: nowrap; width: 1%;' )
                          span(id='swap_history_button' class='swap-mini-button-box' data-toggle='modal' data-target='#swap_history_modal')
                            i(class='fa fa-history mr-1')
                            = 'History'

                        td(scope='row' style='text-align: right; white-space: nowrap; width: 50%;' )
                          span(id='swap_token_final_rate')=''
                          span(id='swap_token_final_rate_inverse' style='display: none;')=''
                          span(id='swap_token_final_rate_inverse_button' class='swap-mini-button-box ml-1' style='display:none;')
                            i(class='fa fa-refresh ml-1 mr-1')
                        td(scope='row' style='text-align: right; white-space: nowrap; width: 1%;' )
                          span(id='swap_token_info_popover_button' class='swap-mini-button-box' tabindex='0' data-toggle='popover' data-trigger='focus' data-popover-content='#swap_token_info_popover' data-placement='bottom')
                            i(class='fa fa-info-circle ml-1 mr-1')

                div(class='swap-box')
                  button(id='approve_button' class='btn btn-lg btn-info disabled' style='width: 100%; border-radius: 10px; display: none;')= 'Approve'
                  button(id='swap_button' class='btn btn-lg btn-info disabled' style='width: 100%; border-radius: 10px;')= 'Swap'

                div(id='transaction_table_container' class='swap-box-table-transparent' style='display: none;')
                  table(class='table table-sm table-borderless' width='100%')
                    tbody(id='transaction_table_list')

        //---------------------- End of Swap DIV ---------------------

        hr

      div(id='main_content_tabs_container' class='container')
        ul(class='nav nav-pills mb-3' role='tablist')
          li(class='nav-item')
            a(class='nav-link active' id='pills-price-chart-tab' data-toggle='pill' href='#pills-price-chart' role='tab' aria-controls='pills-price-chart' aria-selected='true')='Price chart'
          li(class='nav-item')
            a(class='nav-link' id='pills-wallet-tab' data-toggle='pill' href='#pills-wallet' role='tab' aria-controls='pills-wallet' aria-selected='false')='Wallet contents'
          li(class='nav-item')
            a(class='nav-link' id='pills-wallet-nft-tab' data-toggle='pill' href='#pills-wallet-nft' role='tab' aria-controls='pills-wallet-nft' aria-selected='false')='NFT collections'

      div(class='tab-content')

        // Contents for pills-price-chart tab
        div(class='tab-pane fade show active' id='pills-price-chart' role='tabpanel' aria-labelledby='pills-price-chart-tab')

          // Price chart content container
          div(id='price_chart_content_container' class='container')
            div(class='row mb-2')
              div(class='col-xl-8 my-2')
                div(style='display:table-cell; vertical-align: middle;')
                  img(id='price_chart_token_logo' class='mr-3' height='36' src='' loading='lazy')
                  span(id='price_chart_token_name' class='h3 font-weight-bold mr-3' style='vertical-align: middle;')='-'

                  select(id='price_chart_token_ticker_selector' class='custom-select my-2 my-sm-0 ml-auto mr-2')
                    each singleTokenProperty, ticker in zrcTokenPropertiesListMap
                      if ('fixed_token_rate' in singleTokenProperty)
                        - continue
                      option(value=singleTokenProperty.ticker)= singleTokenProperty.ticker

                // token address and external anchor to viewblock
                div(class='mt-1')
                  a(id='price_chart_token_address_anchor' class='mini-button-box' href='' target='_blank')
                    span(id='price_chart_token_address_span')='-'
                    i(class='fa fa-external-link ml-2 mr-1')
                div(class='mb-1')
                  a(id='price_chart_token_website_anchor' class='mini-button-box mr-1' href='' target='_blank' style='display:none;')
                    i(class='fa fa-globe ml-1 mr-2')
                    span='Website'
                    i(class='fa fa-external-link ml-2 mr-1')
                  a(id='price_chart_token_telegram_anchor' class='mini-button-box mr-1' href='' target='_blank' style='display:none;')
                    i(class='fa fa-telegram ml-1 mr-2')
                    span='Telegram'
                    i(class='fa fa-external-link ml-2 mr-1')
                  a(id='price_chart_token_whitepaper_anchor' class='mini-button-box mr-1' href='' target='_blank' style='display:none;')
                    i(class='fa fa-file-text ml-1 mr-2')
                    span='Whitepaper'
                    i(class='fa fa-external-link ml-2 mr-1')

              div(class='col-xl-4 my-2')
                div(class='text-xl-right')
                  span(id='price_chart_current_token_price_zil' class='h3 font-weight-bold')='-'
                  span(class='h5 font-weight-bold ml-2')='ZIL'

                  span(id='price_chart_current_percent_change_container' class='h6 text-secondary ml-3')
                    span(id='price_chart_current_percent_change')='0.0'
                    span= ' %'

                  br
                  span(class='text-secondary currency_symbol mr-1')= '$'
                  span(id='price_chart_current_token_price_fiat' class='text-secondary ')='-'

                  div
                    div(class='progress' style='height: 0.6rem; margin-top: 0.2rem;')
                      div(id='price_chart_low_high_progress' class='progress-bar' role='progressbar' style='width: 50%;' aria-valuenow='50' aria-valuemin='0' aria-valuemax='100')
                    div
                      span(class='price_chart_range mr-1')
                      span(class=' mr-1')= 'low: '
                      span(id='price_chart_range_low' class='font-weight-bold')='-'
                      span(class=' ml-1')= 'ZIL'

                      span(class='ml-2 mr-2')='/'

                      span(class='price_chart_range mr-1')
                      span(class=' mr-1')= 'high: '
                      span(id='price_chart_range_high' class='font-weight-bold')='-'
                      span(class=' ml-1')= 'ZIL'

            div(class='row')
              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='Circulating supply'
                span(id='price_chart_circulating_supply' class='h5 font-weight-bold')='-'
                span(class='price-chart-ticker h5 font-weight-bold ml-1')

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='Market cap'
                span(class='h5 font-weight-bold currency_symbol mr-1')= '$'
                span(id='price_chart_market_cap' class='h5 font-weight-bold')='-'

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='Liquidity'
                span(class='h5 font-weight-bold currency_symbol mr-1')= '$'
                span(id='price_chart_liquidity_fiat' class='h5 font-weight-bold')='-'
                br
                span(id='price_chart_liquidity_zrc' class='h6')
                span(class='price-chart-ticker h6 ml-1')
                span(class='h6 ml-1 mr-1')='/'
                span(id='price_chart_liquidity_zil' class='h6')
                span(class='h6 ml-1')='ZIL'

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='Liquidity / Market cap'
                span(id='price_chart_liquidity_market_cap_ratio' class='h5 font-weight-bold')='-'

            div(class='row mb-2')

              div(class='col-6 col-xl-3 my-2')
                span(class='h6')='Trade volume'
                span(class='ml-1')='('
                span(class='price_chart_range')
                span=')'
                br
                span(class='h5 font-weight-bold currency_symbol mr-1')= '$'
                span(id='price_chart_trade_volume_fiat' class='h5 font-weight-bold')='-'

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='Trade volume / Market cap'
                span(id='price_chart_trade_volume_market_cap_ratio' class='h5 font-weight-bold')='-'

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='All time high'
                span(id='price_chart_all_time_high' class='h5 font-weight-bold')='-'
                span(class='ml-1')= 'ZIL'
                br
                span(id='price_chart_all_time_high_timestamp' class='h6')

              div(class='col-6 col-xl-3 my-2')
                p(class='h6')='All time low'
                span(id='price_chart_all_time_low' class='h5 font-weight-bold')='-'
                span(class='ml-1')= 'ZIL'
                br
                span(id='price_chart_all_time_low_timestamp' class='h6')

            div(class='row')
              div(id='price_chart_period_tabs_container' class='container')
                ul(class='nav nav-pills justify-content-end mb-3' role='tablist')
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-1h-tab' data-toggle='pill' href='#pills-price-chart-1h' role='tab' aria-controls='pills-price-chart-1h' aria-selected='false')='1h'
                  li(class='nav-item')
                    a(class='nav-link active' id='pills-price-chart-24h-tab' data-toggle='pill' href='#pills-price-chart-24h' role='tab' aria-controls='pills-price-chart-24h' aria-selected='true')='24h'
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-7d-tab' data-toggle='pill' href='#pills-price-chart-7d' role='tab' aria-controls='pills-price-chart-7d' aria-selected='false')='7d'
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-1m-tab' data-toggle='pill' href='#pills-price-chart-1m' role='tab' aria-controls='pills-price-chart-1m' aria-selected='false')='1m'
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-3m-tab' data-toggle='pill' href='#pills-price-chart-3m' role='tab' aria-controls='pills-price-chart-3m' aria-selected='false')='3m'
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-1y-tab' data-toggle='pill' href='#pills-price-chart-1y' role='tab' aria-controls='pills-price-chart-1y' aria-selected='false')='1y'
                  li(class='nav-item')
                    a(class='nav-link' id='pills-price-chart-all-tab' data-toggle='pill' href='#pills-price-chart-all' role='tab' aria-controls='pills-price-chart-all' aria-selected='false')='All'

            div(id='full_price_chart')
            div(class='full-price-chart-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
              span(class='sr-only')= 'Loading...'

            hr

        // Contents for pills-wallet tab
        div(class='tab-pane fade' id='pills-wallet' role='tabpanel' aria-labelledby='pills-wallet-tab')

          // Wallet content container
          div(id='wallet_content_container')

            // Error Message Container
            div(class='error_message_container container')
              div(class='balance-box row container')
                span(class='error_message h5')= 'Loading...'

                button(class='error_wallet_connect_button wallet_connect_button btn btn-info mx-2 my-sm-0' style='display: none;')= 'Connect'
                a(class='error_download_zilpay_button' href='https://zilpay.io' target='_blank' style='display: none;')
                  button(class='btn btn-info mx-2 my-sm-0')= 'Download ZilPay'
              hr

            // Main Content Container
            div(id='main_content_container' class='container' style='display: none;')

              div(class='row')
                div(class='col-12')
                  a(class='ark-profile-anchor' target='_blank')
                    img(class='ark-profile-pic rounded-circle mr-2' height='60' src='' alt='ARK profile pic' style='display: none;')
                  span(id='wallet_full_address' style='display: none;')
                  span(id='wallet_censored_address' style='display: none;')
                  span(id='wallet_censor_button' class='mini-button-box ml-1')
                    i(id='wallet_censor_icon' class='fa fa-eye-slash ml-1 mr-1')
                  a(class='wallet-viewblock-anchor mini-button-box ml-1' target='_blank' style='color: var(--text-color);')
                    img(height='20' src='https://cdn.viewblock.io/viewblock-light.png' alt='ViewBlock logo')
                    i(class='fa fa-external-link ml-1 mr-1')
                  span(id='wallet_copy_button' class='mini-button-box ml-1')
                    i(class='fa fa-copy ml-1 mr-1')
                    span(id='wallet_copy_message')

              div(class='row')
                div(class='balance-box col-md-6')
                  div(class='mb-1' style='display:table-cell; vertical-align: middle;')
                    span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Net Worth'
                    div(class='net-worth-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                      span(class='sr-only')= 'Loading...'
                  span(class='h4')
                    span(class='currency_symbol mr-1')= '$'
                    span(id='net_worth_fiat')= 'Loading...'
                  span(id='net_worth_fiat_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='net_worth_fiat_percent_change_24h')
                    span= ' %'
                  span(id='net_worth_fiat_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(class='currency_symbol mr-1')= '$'
                    span(id='net_worth_fiat_24h_ago')
                    span(class='ml-1')= '(24h ago)'
                  br
                  span(class='h6')
                    span(id='net_worth_zil')= 'Loading...'
                    span(class='ml-1')= 'ZIL'
                  span(id='net_worth_zil_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='net_worth_zil_percent_change_24h')
                    span= ' %'
                  span(id='net_worth_zil_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(id='net_worth_zil_24h_ago')
                    span(class='ml-1')= 'ZIL'
                    span(class='ml-1')= '(24h ago)'

                div(class='balance-box col-md-6')
                  div(class='mb-1' style='display:table-cell; vertical-align: middle;')
                    span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Wallet Balance'
                    div(class='wallet-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                      span(class='sr-only')= 'Loading...'
                  span(class='h4')
                    span(class='currency_symbol mr-1')= '$'
                    span(id='wallet_balance_fiat')= 'Loading...'
                  span(id='wallet_balance_fiat_percent_change_24h_container' class='tooltip-container tooltip-rounded  h6 text-secondary ml-3')
                    span(id='wallet_balance_fiat_percent_change_24h')
                    span= ' %'
                  span(id='wallet_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(class='currency_symbol mr-1')= '$'
                    span(id='wallet_balance_fiat_24h_ago')
                    span(class='ml-1')= '(24h ago)'
                  br
                  span(class='h6')
                    span(id='wallet_balance_zil')= 'Loading...'
                    span(class='ml-1')= 'ZIL'
                  span(id='wallet_balance_zil_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='wallet_balance_zil_percent_change_24h')
                    span= ' %'
                  span(id='wallet_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(id='wallet_balance_zil_24h_ago')
                    span(class='ml-1')= 'ZIL'
                    span(class='ml-1')= '(24h ago)'

                div(class='balance-box col-md-6')
                  div(class='mb-1' style='display:table-cell; vertical-align: middle;')
                    span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'LP Balance'
                    div(class='lp-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                      span(class='sr-only')= 'Loading...'
                  span(class='h4')
                    span(class='currency_symbol mr-1')= '$'
                    span(id='lp_balance_fiat')= 'Loading...'
                  span(id='lp_balance_fiat_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='lp_balance_fiat_percent_change_24h')
                    span= ' %'
                  span(id='lp_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(class='currency_symbol mr-1')= '$'
                    span(id='lp_balance_fiat_24h_ago')
                    span(class='ml-1')= '(24h ago)'
                  br
                  span(class='h6')
                    span(id='lp_balance_zil')= 'Loading...'
                    span(class='ml-1')= 'ZIL'
                  span(id='lp_balance_zil_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='lp_balance_zil_percent_change_24h')
                    span= ' %'
                  span(id='lp_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(id='lp_balance_zil_24h_ago')
                    span(class='ml-1')= 'ZIL'
                    span(class='ml-1')= '(24h ago)'

                div(class='balance-box col-md-6')
                  div(class='mb-1' style='display:table-cell; vertical-align: middle;')
                    span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Staking Balance'
                    div(class='staking-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle;  display: none;')
                      span(class='sr-only')= 'Loading...'
                  span(class='h4')
                    span(class='currency_symbol mr-1')= '$'
                    span(id='staking_balance_fiat')= 'Loading...'
                  span(id='staking_balance_fiat_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='staking_balance_fiat_percent_change_24h')
                    span= ' %'
                  span(id='staking_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(class='currency_symbol mr-1')= '$'
                    span(id='staking_balance_fiat_24h_ago')
                    span(class='ml-1')= '(24h ago)'
                  br
                  span(class='h6')
                    span(id='staking_balance_zil')= 'Loading...'
                    span(class='ml-1')= 'ZIL'
                  span(id='staking_balance_zil_percent_change_24h_container' class='tooltip-container tooltip-rounded h6 text-secondary ml-3')
                    span(id='staking_balance_zil_percent_change_24h')
                    span= ' %'
                  span(id='staking_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content-plain text-secondary' style='display: none;')
                    br
                    span(id='staking_balance_zil_24h_ago')
                    span(class='ml-1')= 'ZIL'
                    span(class='ml-1')= '(24h ago)'

              div(class='row')
                div(id='net_worth_chart_container' class='balance-box col-lg-6' style='display: none;')
                  div(id='net_worth_chart')
                div(id='unique_coin_chart_container' class='balance-box col-lg-6' style='display: none;')
                  div(id='unique_coin_chart')

              hr

              // Wallet Balance
              div(class='container title-box' style='display:table-cell; vertical-align: middle;')
                img(class='mr-3' height='36' src=zrcTokenPropertiesListMap['ZLP'].logo_url loading='lazy')
                span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Wallet Balance'
                div(class='wallet-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                  span(class='sr-only')= 'Loading...'

              div(id='wallet_balance' class='container')

                div(class='row')

                  div(class='col-lg-6' style='padding: 0;')
                    div(class='box')
                      table(class='table table-sm table-borderless' width='100%')
                        tbody
                          tr
                            td(scope='row' rowspan='4' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                              img(height='32' width='32' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                            td(style='text-align: left; white-space: nowrap; width: 35%;' )
                              span(class='font-weight-bold')= 'Zilliqa'
                            td(style='text-align: right; white-space: nowrap; width: 40%;' )
                              span(id='zil_balance')= 'Loading...'
                              span(id='zil_balance_unit' class='ml-1')= 'ZIL'
                          tr
                            td(scope='row' class='font-weight-normal text-secondary' style='white-space: nowrap; width: 35%;' )
                              span(class='currency_symbol mr-1')= '$'
                              span(class='ZIL_price_fiat')= 'Loading...'
                            td(style='text-align: right; white-space: nowrap; width: 40%;' )
                              span(class='currency_symbol mr-1')= '$'
                              span(id='zil_balance_fiat')= 'Loading...'
                            td(id='zil_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                              span(id='zil_balance_fiat_percent_change_24h')
                              span= '%'
                          tr(id='zil_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                            td(scope='row' style='white-space: nowrap;' )
                              span= 'Balance 24h ago'
                            td(style='text-align: right; white-space: nowrap;' )
                              span(class='currency_symbol mr-1')= '$'
                              span(id='zil_balance_fiat_24h_ago')
                            td(style='text-align: right; white-space: nowrap;' )

                  each circulatingSupply, ticker in zrcTokensCirculatingSupply
                    if !(ticker in zrcTokenPropertiesListMap)
                      - continue
                    - let tokenProperties = zrcTokenPropertiesListMap[ticker]

                    div(id=tokenProperties.ticker+'_container' class='col-lg-6' style='padding: 0; display: none')
                      div(class='box')
                        table(class='table table-sm table-borderless')
                          tbody
                            tr
                              td(scope='row' rowspan='4' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                img(height='32' width='32' src=tokenProperties.logo_url loading='lazy')
                              td(style='text-align: left; white-space: nowrap; width: 35%;' )
                                span(class='font-weight-bold')= tokenProperties.ticker
                                span(class=tokenProperties.ticker+'_price_zil ml-2 text-secondary')= 'Loading...'
                                span(class='ml-1 text-secondary')= 'ZIL'
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(id=tokenProperties.ticker+'_balance_zil')= 'Loading...'
                                span(class='ml-1')= 'ZIL'
                              td(id=tokenProperties.ticker+'_balance_zil_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                span(id=tokenProperties.ticker+'_balance_zil_percent_change_24h')
                                span= '%'
                            tr(id=tokenProperties.ticker+'_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                              td(style='text-align: left; white-space: nowrap;' )
                                span= 'Balance 24h ago'
                              td(style='text-align: right; white-space: nowrap;' )
                                span(id=tokenProperties.ticker+'_balance_zil_24h_ago')
                                span(class='ml-1')= 'ZIL'
                              td(style='text-align: right; white-space: nowrap;' )
                            tr
                              td(scope='row' style='text-align: left; white-space: nowrap; width: 35%;' )
                                span(id=tokenProperties.ticker+'_balance')= 'Loading...'
                                span(id=tokenProperties.ticker+'_balance_unit' class='ml-1')= tokenProperties.ticker
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(id=tokenProperties.ticker+'_balance_fiat')= 'Loading...'
                              td(id=tokenProperties.ticker+'_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                span(id=tokenProperties.ticker+'_balance_fiat_percent_change_24h')
                                span= '%'
                            tr(id=tokenProperties.ticker+'_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                              td(style='text-align: left; white-space: nowrap;' )
                                span= 'Balance 24h ago'
                              td(style='text-align: right; white-space: nowrap;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(id=tokenProperties.ticker+'_balance_fiat_24h_ago')
                              td(style='text-align: right; white-space: nowrap;' )

              hr

              div(id='lp_container' style='display: none')

                div(class='container title-box' style='display:table-cell; vertical-align: middle;')
                  img(class='mr-3' height='36' src='/images/zilswap_long_logo.svg' loading='lazy')
                  span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Liquidity Pool Balance'
                  div(class='lp-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                    span(class='sr-only')= 'Loading...'

                // LP Balance
                div(id='lp_balance' class='container')

                  div(class='row')

                    div(id='total_all_lp_reward_next_epoch_container' class='col-lg-6' style='padding: 0; display: none')
                      div(class='highlight-box')
                        table(class='table table-sm table-borderless')
                          tbody
                            tr
                              td(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                img(height='18' width='18' src=zrcTokenPropertiesListMap['ZWAP'].logo_url loading='lazy')
                              td(style='text-align: left; white-space: nowrap; width: 40%;' )
                                span(class='font-weight-bold')= 'Est. reward'
                              td(style='text-align: right; white-space: nowrap; width: 50%;' )
                                span(id='lp_reward_next_epoch_duration_counter' class='font-weight-normal')
                            tr
                              td(colspan='2' style='text-align: left; white-space: nowrap;' )
                                span(class='mr-3')= 'Next epoch'
                                span(class='currency_symbol text-secondary mr-1')= '$'
                                span(id='total_all_lp_reward_next_epoch_fiat' class='text-secondary')= 'Loading...'
                              td(id='total_all_lp_reward_next_epoch' class='text-secondary' style='text-align: right; white-space: nowrap;' )
                            tr
                              td(colspan='2' style='text-align: left; white-space: nowrap;' )
                                span(class='mr-3')= 'Unclaimed'
                                span(class='currency_symbol text-secondary mr-1')= '$'
                                span(id='total_all_lp_reward_unclaimed_fiat' class='text-secondary')= 'Loading...'
                              td(id='total_all_lp_reward_unclaimed' class='text-secondary' style='text-align: right; white-space: nowrap;' )
                            tr(id='total_all_lp_reward_past_epoch_container')
                              td(colspan='2' style='text-align: left; white-space: nowrap;' )
                                span(class='mr-3')= 'Prev epoch'
                                span(class='currency_symbol text-secondary mr-1')= '$'
                                span(id='total_all_lp_reward_prev_epoch_fiat' class='text-secondary')= 'Loading...'
                              td(id='total_all_lp_reward_prev_epoch' class='text-secondary' style='text-align: right; white-space: nowrap;' )

                            tbody(id='total_all_lp_reward_past_epoch_tooltip_content' class='tooltip-content' style='display: none')

                    each circulatingSupply, ticker in zrcTokensCirculatingSupply
                      if !(ticker in zrcTokenPropertiesListMap)
                        - continue
                      - let tokenProperties = zrcTokenPropertiesListMap[ticker]

                      div(id=tokenProperties.ticker+'_lp_container' class='col-lg-6' style='padding: 0; display: none')
                        div(class='box')
                          table(class='table table-sm table-borderless')
                            tbody
                              tr
                                td(scope='row' style='text-align: left; white-space: nowrap; width: 45%;' )
                                  img(height='18' width='18' src=tokenProperties.logo_url loading='lazy')
                                  img(height='18' width='18' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                                  span(class='font-weight-bold ml-2')= tokenProperties.ticker + '-ZIL'
                                  span(class=tokenProperties.ticker+'_price_zil ml-2 text-secondary')= 'Loading...'
                                  span(class='ml-1 text-secondary')= 'ZIL'

                                td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                  span(id=tokenProperties.ticker+'_lp_balance_zil' class='ml-1')
                                  span(class='ml-1')= 'ZIL'

                                td(id=tokenProperties.ticker+'_lp_balance_zil_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span(id=tokenProperties.ticker+'_lp_balance_zil_percent_change_24h')
                                  span= '%'

                              tbody(id=tokenProperties.ticker+'_lp_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                                tr
                                  td(scope='row' style='text-align: left; white-space: nowrap;' )
                                    span= 'Balance 24h ago'
                                  td(style='text-align: right; white-space: nowrap;' class='text-secondary')
                                    span(id=tokenProperties.ticker+'_lp_pool_share_percent_24h_ago')
                                    span(class='ml-1')= '%'
                                  td(style='text-align: right; white-space: nowrap;' )
                                tr
                                  td(scope='row' style='text-align: left; white-space: nowrap;' )
                                    span(id=tokenProperties.ticker+'_lp_token_balance_24h_ago')
                                    span(class='ml-1')= tokenProperties.ticker
                                    span(class='ml-1')= '-'
                                    span(id=tokenProperties.ticker+'_lp_zil_balance_24h_ago' class='ml-1')
                                    span(class='ml-1')= 'ZIL'
                                  td(style='text-align: right; white-space: nowrap;' )
                                    span(id=tokenProperties.ticker+'_lp_balance_zil_24h_ago' class='tooltip-whitespace')
                                    span(class='ml-1')= 'ZIL'
                                  td(style='text-align: right; white-space: nowrap;' )
                              tr
                                td(style='text-align: left; white-space: nowrap; width: 45%;' )
                                  span(id=tokenProperties.ticker+'_lp_token_balance')
                                  span(id=tokenProperties.ticker+'_lp_token_balance_unit' class='ml-1')= tokenProperties.ticker
                                  span(class='ml-1')= '-'
                                  span(id=tokenProperties.ticker+'_lp_zil_balance' class='ml-1')
                                  span(id=tokenProperties.ticker+'_lp_zil_balance_unit' class='ml-1')= 'ZIL'
                                td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(id=tokenProperties.ticker+'_lp_balance_fiat')= 'Loading...'
                                td(id=tokenProperties.ticker+'_lp_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span(id=tokenProperties.ticker+'_lp_balance_fiat_percent_change_24h')
                                  span= '%'
                              tr(id=tokenProperties.ticker+'_lp_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                                td(style='text-align: left; white-space: nowrap;' )
                                  span= 'Balance 24h ago'
                                td(style='text-align: right; white-space: nowrap;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(id=tokenProperties.ticker+'_lp_balance_fiat_24h_ago')
                                td(style='text-align: right; white-space: nowrap;' )

                              tr
                                td(id=tokenProperties.ticker+'_lp_pool_reward' class='text-secondary' style='text-align: left; white-space: nowrap; width: 45%;' )
                                td(class='text-secondary' style='text-align: right; white-space: nowrap; width: 55%;' )
                                  span(id=tokenProperties.ticker+'_lp_pool_share_percent')= 'Loading...'
                                  span(class='ml-1')= '%'
                                td(style='text-align: right; white-space: nowrap;' )

                              tr
                                td(class='text-secondary' style='text-align: left; white-space: nowrap; width: 45%;' )
                                  span= 'Est. 0.3% fee earned (24h)'
                                td(class='text-secondary' style='text-align: right; white-space: nowrap; width: 55%;' )
                                  span(id=tokenProperties.ticker+'_lp_pool_fee_reward_zil')= 'Loading...'
                                  span(class='ml-1')= 'ZIL'
                                td(style='text-align: right; white-space: nowrap;' )
                hr

              div(id='staking_container' style='display: none')

                div(class='container title-box' style='display:table-cell; vertical-align: middle;')
                  span(class='h3 font-weight-bold' style='vertical-align: middle;')= 'Staking Balance'
                  div(class='staking-balance-spinner ml-3 spinner-border text-info' role='status' style='vertical-align: middle; display: none;')
                    span(class='sr-only')= 'Loading...'

                // ZIL Staking Balance
                div(id='zil_staking_balance' class='container')

                  div(class='row')

                    each ssnProperties, ssnAddress in ssnListMap

                      div(id=ssnAddress+'_zil_staking_container' class='col-lg-6' style='padding: 0; display: none')
                        div(class='box')
                          table(class='table table-sm table-borderless')
                            tbody
                              tr
                                td(scope='row' rowspan='4' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                  img(height='32' width='32' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                                td(style='text-align: left; white-space: nowrap; width: 35%;' )
                                  span(class='font-weight-bold')= ssnProperties.arguments[3] + ' seed node'
                                td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                  span(id=ssnAddress+'_zil_staking_balance')= 'Loading...'
                                  span(id=ssnAddress+'_zil_staking_balance_unit' class='ml-1')= 'ZIL'
                              tr
                                td(scope='row' class='font-weight-normal text-secondary' style='white-space: nowrap; width: 35%;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(class='ZIL_price_fiat')= 'Loading...'
                                td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(id=ssnAddress+'_zil_staking_balance_fiat')= 'Loading...'
                                td(id=ssnAddress+'_zil_staking_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                  span(id=ssnAddress+'_zil_staking_balance_fiat_percent_change_24h')
                                  span= '%'
                              tr(id=ssnAddress+'_zil_staking_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                                td(scope='row' style='white-space: nowrap;' )
                                  span= 'Balance 24h ago'
                                td(style='text-align: right; white-space: nowrap;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(id=ssnAddress+'_zil_staking_balance_fiat_24h_ago')
                                td(style='text-align: right; white-space: nowrap;' )

                    div(id='zil_staking_withdrawal_pending_container' class='col-lg-6' style='padding: 0; display: none')
                      div(class='box')
                        table(class='table table-sm table-borderless')
                          tbody
                            tr
                              td(scope='row' rowspan='4' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                img(height='32' width='32' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                              td(style='text-align: left; white-space: nowrap; width: 35%;' )
                                span(class='font-weight-bold')= 'Withdrawal pending'
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(id='zil_staking_withdrawal_pending_balance')= 'Loading...'
                                span(id='zil_staking_withdrawal_pending_balance_unit' class='ml-1')= 'ZIL'
                            tr
                              td(scope='row' class='font-weight-normal text-secondary' style='white-space: nowrap; width: 35%;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(class='ZIL_price_fiat')= 'Loading...'
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(id='zil_staking_withdrawal_pending_balance_fiat')= 'Loading...'
                              td(id='zil_staking_withdrawal_pending_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                span(id='zil_staking_withdrawal_pending_balance_fiat_percent_change_24h')
                                span= '%'
                            tr(id='zil_staking_withdrawal_pending_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                              td(scope='row' style='white-space: nowrap;' )
                                span= 'Balance 24h ago'
                              td(style='text-align: right; white-space: nowrap;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(id='zil_staking_withdrawal_pending_balance_fiat_24h_ago')
                              td(style='text-align: right; white-space: nowrap;' )

                    div(id='carbon_staking_container' class='col-lg-6' style='padding: 0; display: none')
                      div(class='box')
                        table(class='table table-sm table-borderless')
                          tbody
                            tr
                              td(scope='row' rowspan='4' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                                img(height='32' width='32' src=zrcTokenPropertiesListMap['CARB'].logo_url loading='lazy')
                              td(style='text-align: left; white-space: nowrap; width: 35%;' )
                                span(class='font-weight-bold')= zrcTokenPropertiesListMap['CARB'].name
                                span(class=zrcTokenPropertiesListMap['CARB'].ticker+'_price_zil ml-2 text-secondary')= 'Loading...'
                                span(class='ml-1 text-secondary')= 'ZIL'
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(id='carbon_staking_balance_zil')= 'Loading...'
                                span(class='ml-1')= 'ZIL'
                              td(id='carbon_staking_balance_zil_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                span(id='carbon_staking_balance_zil_percent_change_24h')
                                span= '%'
                              tr(id='carbon_staking_balance_zil_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                                td(scope='row' style='white-space: nowrap;' )
                                  span= 'Balance 24h ago'
                                td(style='text-align: right; white-space: nowrap;' )
                                  span(id='carbon_staking_balance_zil_24h_ago')
                                  span(class='ml-1')= 'ZIL'
                                td(style='text-align: right; white-space: nowrap;' )
                            tr
                              td(style='text-align: left; white-space: nowrap; width: 35%;' )
                                span(id='carbon_staking_balance')= 'Loading...'
                                span(id='carbon_zil_staking_balance_unit' class='ml-1')= zrcTokenPropertiesListMap['CARB'].ticker
                              td(style='text-align: right; white-space: nowrap; width: 40%;' )
                                span(class='currency_symbol mr-1')= '$'
                                span(id='carbon_staking_balance_fiat')= 'Loading...'
                              td(id='carbon_staking_balance_fiat_percent_change_24h_container' class='tooltip-container text-secondary' style='text-align: right; white-space: nowrap; width: 10%;' )
                                span(id='carbon_staking_balance_fiat_percent_change_24h')
                                span= '%'
                              tr(id='carbon_staking_balance_fiat_percent_change_24h_tooltip_content' class='tooltip-content' style='display: none;')
                                td(scope='row' style='white-space: nowrap;' )
                                  span= 'Balance 24h ago'
                                td(style='text-align: right; white-space: nowrap;' )
                                  span(class='currency_symbol mr-1')= '$'
                                  span(id='carbon_staking_balance_fiat_24h_ago')
                                td(style='text-align: right; white-space: nowrap;' )
                hr

        // Contents for pills-wallet-nft tab
        div(class='tab-pane fade' id='pills-wallet-nft' role='tabpanel' aria-labelledby='pills-wallet-nft-tab')

          // Error Message Container
          div(class='error_message_container container')
            div(class='balance-box row container')
              span(class='error_message h5')= 'Loading...'

              button(class='error_wallet_connect_button wallet_connect_button btn btn-info mx-2 my-sm-0' style='display: none;')= 'Connect'
              a(class='error_download_zilpay_button' href='https://zilpay.io' target='_blank' style='display: none;')
                button(class='btn btn-info mx-2 my-sm-0')= 'Download ZilPay'
            hr

          // Empty NFT container
          div(id='empty_nft_container' class='container')
            div(class='balance-box container')
              span(class='h5')= 'There are no supported NFTs in the wallet.'

            div(class='balance-box container')
              span(class='h5')= 'We currently support:'
              ul
                each nftTokenProperty, nftTicker in nftTokenPropertiesListMap
                  li
                    a(class='mini-button-box mr-2' href='https://viewblock.io/zilliqa/address/' + nftTokenProperty.address target='_blank')
                      img(height='20' src='https://cdn.viewblock.io/viewblock-light.png' alt='ViewBlock logo')
                      i(class='fa fa-external-link ml-2 mr-1')
                    a(href=nftTokenProperty.website)=nftTokenProperty.name + ' (' + nftTicker + ')'

            div(class='balance-box container')
              span(class='h5')= 'Looking to get some NFTs? Visit any of the NFT marketplace below.'
              ul
                li
                  a(href='https://zilswap.io/ark/collections')='ZilSwap ARK'
                li
                  a(href='https://okimoto.io')='Okimoto'
                li
                  a(href='https://spardawallet.com')='SpardaWallet'

            hr

          // Wallet NFT content container
          div(id='wallet_nft_content_container' style='display: none;')

            each nftTokenProperty, nftTicker in nftTokenPropertiesListMap

              div(id=nftTicker+'_container' class='container' style='display:none')

                // Single NFT provider contents
                div(class='container title-box' style='display:table-cell; vertical-align: middle;')
                  img(class='mr-3' height='36' src=nftTokenProperty.logo_url loading='lazy')
                  span(class='h3 font-weight-bold mr-3' style='vertical-align: middle;')= nftTokenProperty.name

                  if nftTokenProperty.website
                    a(class='mini-button-box mr-1' href=nftTokenProperty.website target='_blank')
                      i(class='fa fa-globe ml-1 mr-2')
                      span='Website'
                      i(class='fa fa-external-link ml-2 mr-1')

                  a(class='mini-button-box mr-1' href='https://viewblock.io/zilliqa/address/' + nftTokenProperty.address target='_blank')
                    img(height='20' src='https://cdn.viewblock.io/viewblock-light.png' alt='ViewBlock logo')
                    i(class='fa fa-external-link ml-2 mr-1')

                div(class='container')
                  div(id=nftTicker+'_content_list' class='row')

                hr

      //---------------------- Start of Swap Modals ---------------------

      //- Modal for swap pick tokens
      div(class='modal fade' id='swap_token_picker_modal' tabindex='-1' role='dialog' aria-labelledby='swap_token_picker_modal_label' aria-hidden='true')
        div(class='modal-dialog' role='document')
          div(class='modal-content')
            div(class='modal-header')
              h5(class='modal-title')='Select token'
              button(type='button' class='close' data-dismiss='modal' aria-label='Close')
                span(aria-hidden='true')='×'
            div(class='modal-body' style='padding: 0; padding-right: 0.6rem;')
              table(class='table table-borderless' width='100%')
                tbody
                  tr(id='ZIL_token_list_row' class='token-list-row' data-ticker='ZIL')
                    th(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                      img(height='28' width='28' src='https://meta.viewblock.io/ZIL/logo' loading='lazy')
                    th(style='display: table-cell; vertical-align: middle; white-space: nowrap; line-height: 1.1; width: 1%;')
                      span= 'ZIL'
                      br
                      small(class='text-secondary')= 'Zilliqa'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 90%;' )
                      h5(id='zil_balance_precise' style='vertical-align: middle; margin:0;')= '0'

                  - let currTokenStartingAlphabet = '-';
                  each tokenProperties, ticker in zrcTokenPropertiesListMap
                    - let trStyle = ''
                     if ('fixed_token_rate' in tokenProperties)
                      - trStyle = 'display: none;'

                    //- This is for Alphabet header for each new letter.
                    - let isNewCharStart = tokenProperties.ticker.charAt(0).toUpperCase() !== currTokenStartingAlphabet;
                    if isNewCharStart 
                      - currTokenStartingAlphabet = tokenProperties.ticker.charAt(0).toUpperCase();
                      tr(style=trStyle)
                        th(colspan=3 style="border-top: 1px solid var(--light-alpha-10);")
                          span=currTokenStartingAlphabet

                    tr(id=ticker+'_token_list_row' class='token-list-row' data-ticker=ticker style=trStyle)
                      th(scope='row' style='display:table-cell; vertical-align: middle; white-space: nowrap; width: 1%;')
                        img(height='28' width='28' src=tokenProperties.logo_url loading='lazy')
                      th(style='display: table-cell; vertical-align: middle; white-space: nowrap; line-height: 1.1; width: 1%;')
                        span= tokenProperties.ticker
                        br
                        small(class='text-secondary')= tokenProperties.name
                      td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 90%;' )
                        h5(id=tokenProperties.ticker+'_balance_precise' style='vertical-align: middle; margin:0;')= '0'

      //- Modal for swap token settings
      div(class='modal fade' id='swap_token_settings_modal' tabindex='-1' role='dialog' aria-labelledby='swap_token_settings_label' aria-hidden='true')
        div(class='modal-dialog' role='document')
          div(class='modal-content')
            div(class='modal-header')
              h5(class='modal-title')='Swap settings'
              button(type='button' class='close' data-dismiss='modal' aria-label='Close')
                span(aria-hidden='true')='×'

            div(class='modal-body' style='padding: 0; padding-right: 0.6rem;')
              table(class='table table-borderless' width='100%')
                tbody
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2;  white-space: nowrap; width: 50%;')
                      span='Slippage Tolerance'
                      i(class='fa fa-info-circle ml-2' tabindex='0' data-toggle='popover' data-trigger='focus' data-popover-content='#slippage_tolerance_info_popover' data-placement='top')
                      br
                      span(class='slippage-tolerance-quick-button swap-mini-button-box')= '0.1%'
                      span(class='slippage-tolerance-quick-button swap-mini-button-box ml-1')= '0.5%'
                      span(class='slippage-tolerance-quick-button swap-mini-button-box swap-mini-button-box-highlight ml-1')= '1%'
                      span(class='slippage-tolerance-quick-button swap-mini-button-box ml-1')= '2%'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      div(class='input-group')
                        input(id='slippage_tolerance_input' class='swap-settings-input form-control' inputmode='decimal' autocomplete='off' autocorrect='off' type='text' pattern='^[0-9]*[.,]?[0-9]*$' placeholder='0.0' minlength='1' maxlength='79' spellcheck='false' value='1')
                        div(class='input-group-append')
                          span(class='input-group-text')='%'

                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Transaction deadline'
                      i(class='fa fa-info-circle ml-2' tabindex='0' data-toggle='popover' data-trigger='focus' data-popover-content='#transaction_deadline_info_popover' data-placement='top')
                      br
                      span(class='transaction-deadline-quick-button swap-mini-button-box')= '1 min'
                      span(class='transaction-deadline-quick-button swap-mini-button-box swap-mini-button-box-highlight ml-1')= '3 mins'
                      span(class='transaction-deadline-quick-button swap-mini-button-box ml-1')= '10 mins'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      div(class='input-group')
                        input(id='transaction_deadline_input' class='swap-settings-input form-control' inputmode='decimal' autocomplete='off' autocorrect='off' type='text' pattern='^[0-9]*[.,]?[0-9]*$' placeholder='0.0' minlength='1' maxlength='79' spellcheck='false' value='3')
                        div(class='input-group-append')
                          span(class='input-group-text')='mins'

                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Gas limit'
                      i(class='fa fa-info-circle ml-2' tabindex='0' data-toggle='popover' data-trigger='focus' data-popover-content='#gas_limit_info_popover' data-placement='top')
                      br
                      span(class='gas-limit-quick-button swap-mini-button-box')= '5 ZIL'
                      span(class='gas-limit-quick-button swap-mini-button-box swap-mini-button-box-highlight ml-1')= '10 ZIL'
                      span(class='gas-limit-quick-button swap-mini-button-box ml-1')= '25 ZIL'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      div(class='input-group')
                        input(id='gas_limit_input' class='swap-settings-input form-control' inputmode='decimal' autocomplete='off' autocorrect='off' type='text' pattern='^[0-9]*[.,]?[0-9]*$' placeholder='0.0' minlength='1' maxlength='79' spellcheck='false' value='10')
                        div(class='input-group-append')
                          span(class='input-group-text')='ZIL'

            div(class='modal-footer')
              button(id='swap_token_settings_reset' type='button' class='btn btn-secondary')= 'Reset to default'
              button(type='button' class='btn btn-secondary' data-dismiss='modal')= 'Cancel'
              button(id='swap_token_settings_save' type='button' class='btn btn-info')= 'Save and close'

      //- Modal for final swap confirmation
      div(class='modal fade' id='swap_token_confirmation_modal' tabindex='-1' role='dialog' aria-labelledby='swap_token_confirmation_label' aria-hidden='true')
        div(class='modal-dialog' role='document')
          div(class='modal-content')
            div(class='modal-header')
              h5(class='modal-title')='Swap Confirmation'
              button(type='button' class='close' data-dismiss='modal' aria-label='Close')
                span(aria-hidden='true')='×'

            div(class='modal-body' style='padding: 0; padding-right: 0.6rem;')

              div(id='swap_token_confirmation_error_message_container' style='padding:0.6rem; text-align: right; display: none;')
                span(id='swap_token_confirmation_error_message' class='negative-red')

              table(id='swap_token_confirmation_container' class='table table-borderless' width='100%' style='display: none;')
                tbody
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Exact amount to send'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      span(id='swap_token_confirmation_send_amount')
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Est. amount to receive'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      span(id='swap_token_confirmation_receive_amount')
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Min. amount to receive'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      span(id='swap_token_confirmation_min_receive_amount')
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Transaction deadline'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      span(id='swap_token_confirmation_transaction_deadline')
                  tr
                    td(scope='row' style='display:table-cell; vertical-align: middle; text-align: left; line-height: 2; white-space: nowrap; width: 50%;')
                      span='Gas limit'
                    td(style='display:table-cell; vertical-align: middle; text-align: right; white-space: nowrap; width: 50%;' )
                      span(id='swap_token_confirmation_gas_limit')

            div(class='modal-footer')
              button(type='button' class='btn btn-secondary' data-dismiss='modal')= 'Cancel'
              button(id='swap_token_confirmation_confirm_button' type='button' class='btn btn-info disabled')= 'Swap'


      //- Modal for swap history
      div(class='modal fade' id='swap_history_modal' tabindex='-1' role='dialog' aria-labelledby='swap_history_label' aria-hidden='true')
        div(class='modal-dialog' role='document')
          div(class='modal-content')
            div(class='modal-header')
              h5(class='modal-title')='Transaction History'
              button(type='button' class='close' data-dismiss='modal' aria-label='Close')
                span(aria-hidden='true')='×'

            div(class='modal-body' style='padding: 0; padding-right: 0.6rem;')

              table(class='table table-borderless' width='100%')
                tbody(id='swap_history_placeholder')
                  tr
                    td(scope='row' style='white-space: nowrap; width: 20%;')
                      span='No transaction history'
                    td(style='white-space: nowrap; width: 20%;' )
                    td(style='white-space: nowrap; width: 50%;' )
                tbody(id='swap_history_table_list')

            div(class='modal-footer')
              button(id='swap_history_reset' type='button' class='btn btn-secondary')= 'Clear history'
              button(type='button' class='btn btn-secondary' data-dismiss='modal')= 'Close'

      //---------------------- End of Swap Modals ---------------------

      //---------------------- Start of Swap Popovers ---------------------
      div(id='swap_token_info_popover' style='display: none;')
        div(class='popover-body')
          table(style='width: 100%;')
            tr
              td(scope='row' style='text-align: left; white-space: nowrap; width: 50%;')
                span(class='mr-2')= 'Minimum received'
              td(style='text-align: right; white-space: nowrap; width: 50%;')
                b(id='popover_minimum_received_amount')= 'N.A.'
            tr
              td(scope='row' style='text-align: left; white-space: nowrap; width: 50%;')
                span(class='mr-2')= 'Slippage tolerance'
              td(style='text-align: right; white-space: nowrap; width: 50%;')
                b(id='popover_slippage_tolerance_percent')= 'N.A.'
                b(class='ml-1')='%'
            tr
              td(scope='row' style='text-align: left; white-space: nowrap; width: 50%;')
                span(class='mr-2')= 'Price impact'
              td(style='text-align: right; white-space: nowrap; width: 50%;')
                b(id='popover_price_impact_percent')= 'N.A.'
                b(class='ml-1')= '%'
            tr
              td(scope='row' style='text-align: left; white-space: nowrap; width: 50%;')
                span(class='mr-2')= 'Liquidity provider fee'
              td(style='text-align: right; width: 50%;')
                b(id='popover_liquidity_provider_fee_amount')= 'N.A.'

      div(id='slippage_tolerance_info_popover' style='display: none;')
        div(class='popover-body')='Transaction will revert if the price changes unfavorably by more than this percentage.'

      div(id='transaction_deadline_info_popover' style='display: none;')
        div(class='popover-body')='Transaction will revert if it is pending for more than this period of time. We assume that 1 block is equal to 30 seconds.'

      div(id='gas_limit_info_popover' style='display: none;')
        div(class='popover-body')='The maximum amount of ZIL you are willing to spend for gas fee. The higher the amount, the quicker the transaction will be executed.'

      //---------------------- End of Swap Popovers ---------------------

block script
  script(src='https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js')
  script(src='https://www.gstatic.com/charts/loader.js')
  script(src='/javascripts/main.index.min.js')

  script.
    var coinMap = !{JSON.stringify(coinMap)};
    var currencyMap = !{JSON.stringify(currencyMap)};
    var ssnListMap = !{JSON.stringify(ssnListMap)};
    var zrcTokenPropertiesListMap = !{JSON.stringify(zrcTokenPropertiesListMap)};
    var nftTokenPropertiesListMap = !{JSON.stringify(nftTokenPropertiesListMap)};
    var targetTokenSymbol = !{JSON.stringify(targetTokenSymbol)};
    // Cache from redis (if any). If there are no cache, we will fallback to RPC network call.
    var coinPriceCoingeckoData = !{JSON.stringify(coinPriceCoingecko)};
    var coinPriceCoingecko24hAgoData = !{JSON.stringify(coinPriceCoingecko24hAgo)};
    var coinMarketCoingeckoData = !{JSON.stringify(coinMarketCoingecko)};

    var zilswapDexSmartContractStateData = !{JSON.stringify(zilswapDexSmartContractState)};
    var zilswapDexSmartContractState24hAgoData = !{JSON.stringify(zilswapDexSmartContractState24hAgo)};
    var zilswapDex24hTradeVolumeData = !{JSON.stringify(zilswapDex24hTradeVolume)};
    var zrcTokensTotalSupplyData = !{JSON.stringify(zrcTokensTotalSupply)};
    var zrcTokensCirculatingSupplyData = !{JSON.stringify(zrcTokensCirculatingSupply)};

    var zrcTokenPrice24hLowData = !{JSON.stringify(zrcTokenPrice24hLow)};
    var zrcTokenPrice24hHighData = !{JSON.stringify(zrcTokenPrice24hHigh)};

    var zilswapDistributorToTickerMap = !{JSON.stringify(zilswapDistributorToTickerMap)};

    const barChartDrawer = new BarChartDrawer();
    const simpleChartStatus = new SimpleChartStatus(zrcTokenPropertiesListMap, /* simpleAllTokensData= */ null);

    const coinPriceStatus = new CoinPriceStatus(coinMap, currencyMap, /* activeCurrencyCode= */ 'usd', coinPriceCoingeckoData, coinPriceCoingecko24hAgoData);
    const zilswapDexStatus = new ZilswapDexStatus(zrcTokenPropertiesListMap, coinPriceStatus, /* walletAddressBase16= */ null, zilswapDexSmartContractStateData,  zilswapDexSmartContractState24hAgoData, zrcTokensCirculatingSupplyData, zrcTokensTotalSupplyData);
    const walletBalanceStatus = new WalletBalanceStatus(zrcTokenPropertiesListMap, coinPriceStatus, zilswapDexStatus, /* walletAddressBase16= */ null, /* zilBalanceData= */ null, /* zilBalanceDataMap= */ null);
    const stakingCarbonStatus = new StakingCarbonStatus(coinPriceStatus, zilswapDexStatus, /* walletAddressBase16= */ null, /* carbonBalanceData= */ null);
    const stakingBalanceStatus = new StakingBalanceStatus(zrcTokenPropertiesListMap, ssnListMap, coinPriceStatus, /* walletAddressBase16= */ null, /* zilStakingBalanceData= */ null, /* zilStakingWithdrawalBalanceData= */ null, stakingCarbonStatus);
    const netWorthStatus = new NetWorthStatus(barChartDrawer, coinPriceStatus, zilswapDexStatus, walletBalanceStatus, stakingBalanceStatus);

    const coinMarketStatus = new CoinMarketStatus(coinMap, coinPriceStatus, coinMarketCoingeckoData);
    const zilswapZrcPrice24hLowHighStatus = new ZilswapZrcPrice24hLowHighStatus(zrcTokenPropertiesListMap, zilswapDexStatus, zrcTokenPrice24hLowData, zrcTokenPrice24hHighData);

    const zilswapTradeVolumeStatus = new ZilswapTradeVolumeStatus(zrcTokenPropertiesListMap, coinPriceStatus, zilswapDex24hTradeVolumeData)
    const uniqueCoinStatus = new UniqueCoinStatus(zrcTokenPropertiesListMap, barChartDrawer, zilswapDexStatus, walletBalanceStatus, stakingBalanceStatus, stakingCarbonStatus);
    const zilswapLpFeeRewardStatus = new ZilswapLpFeeRewardStatus(zrcTokenPropertiesListMap, zilswapDexStatus, zilswapTradeVolumeStatus);
    const zilswapLpZwapRewardStatus = new ZilswapLpZwapRewardStatus(zrcTokenPropertiesListMap, coinPriceStatus, zilswapDexStatus, zilswapDistributorToTickerMap);

    const swapStatus = new SwapStatus(zrcTokenPropertiesListMap, coinPriceStatus, zilswapDexStatus, walletBalanceStatus)

    const priceChartStatus = new PriceChartStatus(zrcTokenPropertiesListMap, targetTokenSymbol, coinPriceStatus, zilswapDexStatus, zilswapTradeVolumeStatus);

    const nftCollectionStatus = new NftCollectionStatus(nftTokenPropertiesListMap);
    const zilswapArkProfilePicStatus = new ZilswapArkProfilePicStatus();

    function getRandomInt(max) {
      return Math.floor(Math.random() * max);
    }

    function newBlockListenerCallback(blockchainStatusNotifyType, blockNum, txHashArr) {
      console.log('NewBlock-%s: %s', blockchainStatusNotifyType, blockNum);

      swapStatus.onNewBlockStatusChange(blockNum, txHashArr);

      // Only refresh if the callback is from a websocket, i.e., a notification after the first load.
      if (blockchainStatusNotifyType === BlockchainStatusNotifyType.WEBSOCKET) {
        refreshCoinPriceStatus();
        refreshZilswapDexStatus();
        refreshWalletBalanceStatus();
        refreshStakingBalanceStatus();
        refreshCoinMarketStatus();

        // Don't load if the price content header is not expanded.
        if (! $('#price_content_header_container').hasClass('collapsed')) {
          // Random timeout delay of max 4s not to overload API server
          let lowHighRandomTimeoutDelayMs = getRandomInt(4000)
          setTimeout(function () {
            refreshZilswapZrcPrice24hLowHighStatus();
          }, lowHighRandomTimeoutDelayMs);
        }

        // Don't load if the price chart screen is not active.
        if ($('#pills-price-chart').css('display') !== 'none') {
          // Random timeout delay of max 8s not to overload API server
          let priceChartRandomTimeoutDelayMs = getRandomInt(8000)
          setTimeout(function () {
            refreshPriceChartStatus();
          }, priceChartRandomTimeoutDelayMs);
        }

        // Trade volume is not refreshed here upon each block because the data
        // is not real-time anyway.
        // It's refreshed every 15 minutes.
      }
    }

    const blockchainStatusSocketConnection = new BlockchainStatusSocketConnection(newBlockListenerCallback);

    /** Refresh functions */
    function refreshPriceChartStatus() {
      priceChartStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function () {
          incrementShowSpinnerFullPriceChart();
        },
        /* onSuccessCallback= */
        function () {
          decrementShowSpinnerFullPriceChart();
        },
        /* onErrorCallback= */
        function () {
          decrementShowSpinnerFullPriceChart();
        });
    }

    /** Refresh functions */
    function refreshZilswapZrcPrice24hLowHighStatus() {
      zilswapZrcPrice24hLowHighStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function () {},
        /* onSuccessCallback= */
        function () {},
        /* onErrorCallback= */
        function () {});
    }

    /** Refresh functions */
    function refreshCoinMarketStatus() {
      coinMarketStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function() {},
        /* onSuccessCallback= */
        function() {
          refreshDataTable();
        },
        /* onErrorCallback= */
        function() {});
    }

    /** Refresh functions */
    function refreshZilswapTradeVolumeStatus() {
      zilswapTradeVolumeStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function() {},
        /* onSuccessCallback= */
        function() {
          zilswapLpFeeRewardStatus.onZilswapTradeVolumeStatusChange();
          refreshDataTable();
        },
        /* onErrorCallback= */
        function() {});
    }

    function refreshStakingBalanceStatus() {
      stakingBalanceStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function() {
          incrementShowSpinnerStakingBalance();
        },
        /* onSuccessCallback= */
        function() {
          netWorthStatus.onStakingBalanceStatusChange();
          uniqueCoinStatus.onStakingBalanceStatusChange();
          decrementShowSpinnerStakingBalance();
        },
        /* onErrorCallback= */
        function() {
          decrementShowSpinnerStakingBalance();
        });
    }

    function refreshWalletBalanceStatus() {
      walletBalanceStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function() {
          incrementShowSpinnerWalletBalance();
        },
        /* onSuccessCallback= */
        function() {
          netWorthStatus.onWalletBalanceStatusChange();
          uniqueCoinStatus.onWalletBalanceStatusChange();
          swapStatus.onWalletBalanceStatusChange();
          decrementShowSpinnerWalletBalance();
        },
        /* onErrorCallback= */
        function() {
          decrementShowSpinnerWalletBalance();
        });
    }

    function refreshZilswapDexStatus() {
      if (zilswapDexStatus.isWalletAddressSet()) {
        refreshZilswapDexPersonalPublicStatus();
      } else {
        refreshZilswapDexPublicStatus();
      }
    }

    function refreshZilswapDexPersonalPublicStatus() {
      zilswapDexStatus.computePersonalPublicDataRpc(
        /* beforeRpcCallback= */
        function() {
          incrementShowSpinnerLpBalance();
        },
        /* onSuccessCallback= */
        function() {
          walletBalanceStatus.onZilswapDexStatusChange();
          stakingBalanceStatus.onZilswapDexStatusChange();
          netWorthStatus.onZilswapDexStatusChange();
          uniqueCoinStatus.onZilswapDexStatusChange();
          zilswapLpFeeRewardStatus.onZilswapDexStatusChange();
          zilswapLpZwapRewardStatus.onZilswapDexStatusChange();
          zilswapZrcPrice24hLowHighStatus.onZilswapDexStatusChange();
          priceChartStatus.onZilswapDexStatusChange();

          swapStatus.onZilswapDexStatusChange();

          decrementShowSpinnerLpBalance();
          refreshDataTable();
        },
        /* onErrorCallback= */
        function() {
          decrementShowSpinnerLpBalance();
        });
    }

    function refreshZilswapDexPublicStatus() {
      zilswapDexStatus.computePublicDataRpc(
        /* beforeRpcCallback= */
        function() {
        },
        /* onSuccessCallback= */
        function() {
          walletBalanceStatus.onZilswapDexStatusChange();
          stakingBalanceStatus.onZilswapDexStatusChange();
          netWorthStatus.onZilswapDexStatusChange();
          uniqueCoinStatus.onZilswapDexStatusChange();
          zilswapLpZwapRewardStatus.onZilswapDexStatusChange();
          zilswapZrcPrice24hLowHighStatus.onZilswapDexStatusChange();
          priceChartStatus.onZilswapDexStatusChange();

          swapStatus.onZilswapDexStatusChange();
          refreshDataTable();
        },
        /* onErrorCallback= */
        function() {
        });
    }

    function refreshCoinPriceStatus() {
      coinPriceStatus.computeDataRpc(
        /* beforeRpcCallback= */
        function() {
        },
        /* onSuccessCallback= */
        function() {
          zilswapDexStatus.onCoinPriceStatusChange();
          walletBalanceStatus.onCoinPriceStatusChange();
          stakingBalanceStatus.onCoinPriceStatusChange();
          netWorthStatus.onCoinPriceStatusChange();
          zilswapTradeVolumeStatus.onCoinPriceStatusChange();
          zilswapLpZwapRewardStatus.onCoinPriceStatusChange();
          priceChartStatus.onCoinPriceStatusChange();

          swapStatus.onCoinPriceStatusChange();

          coinMarketStatus.onCoinPriceStatusChange();
          refreshDataTable();
        },
        /* onErrorCallback= */
        function() {
        });
    }

